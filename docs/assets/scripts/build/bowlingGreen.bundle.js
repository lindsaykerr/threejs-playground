"use strict";(self.webpackChunkthreejs_playground=self.webpackChunkthreejs_playground||[]).push([[268],{897:(e,t,n)=>{var a=n(477);const o=new a.lLk;var i=n(217);const s=n.p+"assets/images/e087ff8af39f9a6feb86.png",r=n.p+"assets/images/f1fb4cfab9cfb97ad007.png",c=n.p+"assets/images/9fc75c31386183c7d3b6.png",l=n.p+"assets/images/f71e4cab93705a23b8a2.png",d=n.p+"assets/images/076aca436cf10c30230e.png",m=n.p+"assets/images/a970a32efd5aa96108bd.png";class h extends a.Kj0{constructor(){const e=h.SkyShader,t=new a.jyz({name:"SkyShader",fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:a.rDY.clone(e.uniforms),side:a._Li,depthWrite:!1});super(new a.DvJ(1,1,1),t)}}h.prototype.isSky=!0,h.SkyShader={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new a.Pa4},up:{value:new a.Pa4(0,1,0)}},vertexShader:"\n\t\tuniform vec3 sunPosition;\n\t\tuniform float rayleigh;\n\t\tuniform float turbidity;\n\t\tuniform float mieCoefficient;\n\t\tuniform vec3 up;\n\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\t// constants for atmospheric scattering\n\t\tconst float e = 2.71828182845904523536028747135266249775724709369995957;\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\t// wavelength of used primaries, according to preetham\n\t\tconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n\t\t// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n\t\t// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n\t\tconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n\t\t// mie stuff\n\t\t// K coefficient for the primaries\n\t\tconst float v = 4.0;\n\t\tconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n\t\t// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n\t\tconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n\t\t// earth shadow hack\n\t\t// cutoffAngle = pi / 1.95;\n\t\tconst float cutoffAngle = 1.6110731556870734;\n\t\tconst float steepness = 1.5;\n\t\tconst float EE = 1000.0;\n\n\t\tfloat sunIntensity( float zenithAngleCos ) {\n\t\t\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n\t\t\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n\t\t}\n\n\t\tvec3 totalMie( float T ) {\n\t\t\tfloat c = ( 0.2 * T ) * 10E-18;\n\t\t\treturn 0.434 * c * MieConst;\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvWorldPosition = worldPosition.xyz;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n\t\t\tvSunDirection = normalize( sunPosition );\n\n\t\t\tvSunE = sunIntensity( dot( vSunDirection, up ) );\n\n\t\t\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n\t\t\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n\t\t\t// extinction (absorbtion + out scattering)\n\t\t\t// rayleigh coefficients\n\t\t\tvBetaR = totalRayleigh * rayleighCoefficient;\n\n\t\t\t// mie coefficients\n\t\t\tvBetaM = totalMie( turbidity ) * mieCoefficient;\n\n\t\t}",fragmentShader:"\n\t\tvarying vec3 vWorldPosition;\n\t\tvarying vec3 vSunDirection;\n\t\tvarying float vSunfade;\n\t\tvarying vec3 vBetaR;\n\t\tvarying vec3 vBetaM;\n\t\tvarying float vSunE;\n\n\t\tuniform float mieDirectionalG;\n\t\tuniform vec3 up;\n\n\t\tconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n\t\t// constants for atmospheric scattering\n\t\tconst float pi = 3.141592653589793238462643383279502884197169;\n\n\t\tconst float n = 1.0003; // refractive index of air\n\t\tconst float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n\t\t// optical length at zenith for molecules\n\t\tconst float rayleighZenithLength = 8.4E3;\n\t\tconst float mieZenithLength = 1.25E3;\n\t\t// 66 arc seconds -> degrees, and the cosine of that\n\t\tconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n\t\t// 3.0 / ( 16.0 * pi )\n\t\tconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n\t\t// 1.0 / ( 4.0 * pi )\n\t\tconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\n\t\tfloat rayleighPhase( float cosTheta ) {\n\t\t\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n\t\t}\n\n\t\tfloat hgPhase( float cosTheta, float g ) {\n\t\t\tfloat g2 = pow( g, 2.0 );\n\t\t\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n\t\t\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec3 direction = normalize( vWorldPosition - cameraPos );\n\n\t\t\t// optical length\n\t\t\t// cutoff angle at 90 to avoid singularity in next formula.\n\t\t\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n\t\t\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n\t\t\tfloat sR = rayleighZenithLength * inverse;\n\t\t\tfloat sM = mieZenithLength * inverse;\n\n\t\t\t// combined extinction factor\n\t\t\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n\t\t\t// in scattering\n\t\t\tfloat cosTheta = dot( direction, vSunDirection );\n\n\t\t\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n\t\t\tvec3 betaRTheta = vBetaR * rPhase;\n\n\t\t\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );\n\t\t\tvec3 betaMTheta = vBetaM * mPhase;\n\n\t\t\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n\t\t\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n\t\t\t// nightsky\n\t\t\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n\t\t\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n\t\t\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n\t\t\tvec3 L0 = vec3( 0.1 ) * Fex;\n\n\t\t\t// composition + solar disc\n\t\t\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n\t\t\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n\t\t\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n\t\t\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n\t\t\tgl_FragColor = vec4( retColor, 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}"};const u=new a.cBK(o).load([s,r,c,l,d,m],(()=>{})),p={turbidity:5,rayleigh:.2,mieCoefficient:.005,mieDirectionalG:.07,sunElevation:30,sunAzimuth:180},f={x:0,y:0,z:0,elevationRad:0,azimuthRad:0,elevationDeg:30,azimuthDeg:60},g=new h,v=function(e){g.scale.setScalar(45e3);const t=e||{},n=new a.Pa4;g.material.uniforms.turbidity.value=t.turbidity||p.turbidity,g.material.uniforms.rayleigh.value=t.rayleigh||p.rayleigh,g.material.uniforms.mieCoefficient.value=t.mieCoefficient||p.mieCoefficient,g.material.uniforms.mieDirectionalG.value=t.mieDirectionalG||p.mieDirectionalG,f.elevationDeg=t.sunElevation||f.elevationDeg;const o=a.M8C.degToRad(90-f.elevationDeg);f.azimuthDeg=t.sunAzimuth||f.azimuthDeg;const i=a.M8C.degToRad(f.azimuthDeg);n.setFromSphericalCoords(1,o,i),f.x=n.x,f.y=n.y,f.z=n.z,f.elevationRad=o,f.azimuthRad=i,g.material.uniforms.sunPosition.value.copy(n)};v(p);const b=new a.Ox3(16777215,2);function w(e){void 0===e&&(e={}),b.intensity=e.intensity||b.intensity,b.color=e.color||b.color,b.castShadow=e.castShadow||b.castShadow,b.shadow.mapSize.width=e.shadowMapSizeW||b.shadow.mapSize.width,b.shadow.mapSize.height=e.shadowMapSizeH||b.shadow.mapSize.height,b.shadow.camera.top=e.shadowBoxHeight/2||b.shadow.camera.top,b.shadow.camera.bottom=-e.shadowBoxHeight/2||b.shadow.camera.bottom,b.shadow.camera.left=-e.shadowBoxWidth/2||b.shadow.camera.left,b.shadow.camera.right=e.shadowBoxWidth/2||b.shadow.camera.right,b.shadow.normalBias=e.shadowNormalBias||b.shadow.normalBias,b.shadow.camera.near=e.near||b.shadow.camera.near,b.shadow.camera.far=e.far||b.shadow.camera.far,b.target.position.set(0,0,0);const t=f.elevationRad,n=f.azimuthRad;b.position.setFromSphericalCoords(20,t,n)}w({castShadow:!0,shadowMapSizeW:2048,shadowMapSizeH:2048,shadowBoxHeight:18,shadowBoxWidth:18,shadowNormalBias:.05,near:3.4,far:50});const y=()=>{b.shadow.camera.updateProjectionMatrix()},E=new a.Rki(b.shadow.camera),P=n.p+"assets/gltf/de31034ffbfd840ee251.glb",S=new a.xsS;S.environment=u;const T=g;v(),S.add(T);const O=b;w(),S.add(O),S.add(O.target),new i.E(o).load(P,(e=>{S.add(e.scene),console.log(e.scene);const t=e.scene.getObjectByName("lawn"),n=e.scene.getObjectByName("lawn_base");n.castShadow=!0,n.receiveShadow=!0;const o=e.scene.getObjectByName("bowl");o.material.roughness=.1,o.material.envmapIntensity=10,o.material.color=new a.Ilk(1118481),o.castShadow=!0,e.scene.children[2].castShadow=!0,t.receiveShadow=!0}),(()=>{}),(e=>{console.log(e.message)}));const x={type:"change"},M={type:"start"},A={type:"end"};class z extends a.pBf{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new a.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:a.RsA.ROTATE,MIDDLE:a.RsA.DOLLY,RIGHT:a.RsA.PAN},this.touches={ONE:a.QmN.ROTATE,TWO:a.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return r.phi},this.getAzimuthalAngle=function(){return r.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",G),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(x),n.update(),i=o.NONE},this.update=function(){const t=new a.Pa4,h=(new a._fP).setFromUnitVectors(e.up,new a.Pa4(0,1,0)),u=h.clone().invert(),p=new a.Pa4,f=new a._fP,g=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(h),r.setFromVector3(t),n.autoRotate&&i===o.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(r.theta+=c.theta*n.dampingFactor,r.phi+=c.phi*n.dampingFactor):(r.theta+=c.theta,r.phi+=c.phi);let a=n.minAzimuthAngle,v=n.maxAzimuthAngle;return isFinite(a)&&isFinite(v)&&(a<-Math.PI?a+=g:a>Math.PI&&(a-=g),v<-Math.PI?v+=g:v>Math.PI&&(v-=g),r.theta=a<=v?Math.max(a,Math.min(v,r.theta)):r.theta>(a+v)/2?Math.max(a,r.theta):Math.min(v,r.theta)),r.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,r.phi)),r.makeSafe(),r.radius*=l,r.radius=Math.max(n.minDistance,Math.min(n.maxDistance,r.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),t.setFromSpherical(r),t.applyQuaternion(u),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),l=1,!!(m||p.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s)&&(n.dispatchEvent(x),p.copy(n.object.position),f.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",K),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",W),n.domElement.removeEventListener("wheel",U),n.domElement.removeEventListener("pointermove",Z),n.domElement.removeEventListener("pointerup",X),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",G)};const n=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=o.NONE;const s=1e-6,r=new a.$V,c=new a.$V;let l=1;const d=new a.Pa4;let m=!1;const h=new a.FM8,u=new a.FM8,p=new a.FM8,f=new a.FM8,g=new a.FM8,v=new a.FM8,b=new a.FM8,w=new a.FM8,y=new a.FM8,E=[],P={};function S(){return Math.pow(.95,n.zoomSpeed)}function T(e){c.theta-=e}function O(e){c.phi-=e}const z=function(){const e=new a.Pa4;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}}(),R=function(){const e=new a.Pa4;return function(t,a){!0===n.screenSpacePanning?e.setFromMatrixColumn(a,1):(e.setFromMatrixColumn(a,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}}(),C=function(){const e=new a.Pa4;return function(t,a){const o=n.domElement;if(n.object.isPerspectiveCamera){const i=n.object.position;e.copy(i).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),z(2*t*s/o.clientHeight,n.object.matrix),R(2*a*s/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(z(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),R(a*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function N(e){n.object.isPerspectiveCamera?l/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){n.object.isPerspectiveCamera?l*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function j(e){h.set(e.clientX,e.clientY)}function D(e){f.set(e.clientX,e.clientY)}function k(){if(1===E.length)h.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);h.set(e,t)}}function _(){if(1===E.length)f.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);f.set(e,t)}}function F(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);b.set(0,n)}function I(e){if(1==E.length)u.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);u.set(n,a)}p.subVectors(u,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;T(2*Math.PI*p.x/t.clientHeight),O(2*Math.PI*p.y/t.clientHeight),h.copy(u)}function Y(e){if(1===E.length)g.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);g.set(n,a)}v.subVectors(g,f).multiplyScalar(n.panSpeed),C(v.x,v.y),f.copy(g)}function B(e){const t=Q(e),a=e.pageX-t.x,o=e.pageY-t.y,i=Math.sqrt(a*a+o*o);w.set(0,i),y.set(0,Math.pow(w.y/b.y,n.zoomSpeed)),N(y.y),b.copy(w)}function H(e){!1!==n.enabled&&(0===E.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",Z),n.domElement.addEventListener("pointerup",X)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(q(e),E.length){case 1:switch(n.touches.ONE){case a.QmN.ROTATE:if(!1===n.enableRotate)return;k(),i=o.TOUCH_ROTATE;break;case a.QmN.PAN:if(!1===n.enablePan)return;_(),i=o.TOUCH_PAN;break;default:i=o.NONE}break;case 2:switch(n.touches.TWO){case a.QmN.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&F(),n.enablePan&&_(),i=o.TOUCH_DOLLY_PAN;break;case a.QmN.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&F(),n.enableRotate&&k(),i=o.TOUCH_DOLLY_ROTATE;break;default:i=o.NONE}break;default:i=o.NONE}i!==o.NONE&&n.dispatchEvent(M)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case a.RsA.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY)}(e),i=o.DOLLY;break;case a.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;D(e),i=o.PAN}else{if(!1===n.enableRotate)return;j(e),i=o.ROTATE}break;case a.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;j(e),i=o.ROTATE}else{if(!1===n.enablePan)return;D(e),i=o.PAN}break;default:i=o.NONE}i!==o.NONE&&n.dispatchEvent(M)}(e))}function Z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(q(e),i){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;I(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;Y(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&B(e),n.enablePan&&Y(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&B(e),n.enableRotate&&I(e)}(e),n.update();break;default:i=o.NONE}}(e):function(e){if(!1!==n.enabled)switch(i){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){u.set(e.clientX,e.clientY),p.subVectors(u,h).multiplyScalar(n.rotateSpeed);const t=n.domElement;T(2*Math.PI*p.x/t.clientHeight),O(2*Math.PI*p.y/t.clientHeight),h.copy(u),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY),y.subVectors(w,b),y.y>0?N(S()):y.y<0&&L(S()),b.copy(w),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){g.set(e.clientX,e.clientY),v.subVectors(g,f).multiplyScalar(n.panSpeed),C(v.x,v.y),f.copy(g),n.update()}(e)}}(e))}function X(e){V(e),0===E.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",Z),n.domElement.removeEventListener("pointerup",X)),n.dispatchEvent(A),i=o.NONE}function W(e){V(e)}function U(e){!1!==n.enabled&&!1!==n.enableZoom&&i===o.NONE&&(e.preventDefault(),n.dispatchEvent(M),function(e){e.deltaY<0?L(S()):e.deltaY>0&&N(S()),n.update()}(e),n.dispatchEvent(A))}function G(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:C(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:C(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:C(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:C(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function K(e){!1!==n.enabled&&e.preventDefault()}function V(e){delete P[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}function q(e){let t=P[e.pointerId];void 0===t&&(t=new a.FM8,P[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Q(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return P[t.pointerId]}n.domElement.addEventListener("contextmenu",K),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",U,{passive:!1}),this.update()}}var R=n(637);S.add(E);const C=new R.XS,N=C.addFolder("Sky values"),L=g.material.uniforms;N.add(L.turbidity,"value",0,100,1).name("turbidity"),N.add(L.rayleigh,"value",0,10,.1).name("rayleigh"),N.add(L.mieCoefficient,"value",.001,.5,.001).name("mieCoefficient"),N.add(L.mieDirectionalG,"value",.001,.5,.001).name("mieDirectionalG");const j={elevation:30,azimuth:180};v({sunElevation:j.elevation,sunAzimuth:j.azimuth}),y(),N.add(j,"elevation",1,360,.5).onChange((e=>{v({sunElevation:e}),w()})),N.add(j,"azimuth",1,360,.5).onChange((e=>{v({sunAzimuth:e}),w()}));const D=C.addFolder("Sun lighting");D.add(E,"visible").name("Show sun helper"),D.add(b,"intensity",.1,20,.1);const k=D.addFolder("Shadow settings");k.add(b.shadow.camera,"top",.5,100,.5).onChange((e=>{w({shadowBoxHeight:e,shadowBoxWidth:e}),E.update(),y()})).name("Shadow area"),k.add(b.shadow.camera,"near",.1,10,.1).onChange((()=>{E.update(),y()})),k.add(b.shadow.camera,"far",10,100,1).onChange((()=>{E.update(),y()}));const _=document.querySelector("#i01"),F={camera:{object:null,type:""},scene:null,size:{width:window.innerWidth,height:window.innerHeight}},I={main:{type:1,config:{fov:60,aspect:F.size.width/F.size.height,near:.1,far:500},ref:null}};F.camera=(e=>{if(1===e.type)return{object:new a.cPb(e.config.fov,e.config.aspect,e.config.near,e.config.far),type:1};throw Error("Incorrect camera type")})(I.main),F.scene=S,F.camera.object.position.y=2;const Y=new a.CP7({canvas:_,antialias:!0});Y.setPixelRatio(1),Y.setSize(F.size.width,F.size.height),Y.shadowMap.enabled=!0,Y.physicallyCorrectLights=!0;const B=new z(F.camera.object,Y.domElement);Y.toneMapping=a.YGz,Y.toneMappingExposure=1,requestAnimationFrame((function e(t){Y.render(F.scene,F.camera.object),B.update(),requestAnimationFrame(e)})),window.addEventListener("resize",(e=>{F.size.width=window.innerWidth,F.size.height=window.innerHeight,1===F.camera.type&&(F.camera.object.aspect=F.size.width/F.size.height),F.camera.object.updateProjectionMatrix(),Y.setSize(F.size.width,F.size.height),Y.render(F.scene,F.camera.object)}))}},e=>{e.O(0,[217,841,929],(()=>(897,e(e.s=897)))),e.O()}]);