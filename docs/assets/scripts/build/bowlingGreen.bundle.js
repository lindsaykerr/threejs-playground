"use strict";(self.webpackChunkthreejs_playground=self.webpackChunkthreejs_playground||[]).push([[268],{213:(e,a,i)=>{var t=i(477);const o=new t.lLk;var n=i(217);const s=i.p+"assets/images/e087ff8af39f9a6feb86.png",d=i.p+"assets/images/f1fb4cfab9cfb97ad007.png",r=i.p+"assets/images/9fc75c31386183c7d3b6.png",c=i.p+"assets/images/f71e4cab93705a23b8a2.png",h=i.p+"assets/images/076aca436cf10c30230e.png",m=i.p+"assets/images/a970a32efd5aa96108bd.png";var l=i(644);const w=new t.cBK(o).load([s,d,r,c,h,m],(()=>{})),g={turbidity:5,rayleigh:.2,mieCoefficient:.005,mieDirectionalG:.07,sunElevation:30,sunAzimuth:180},u={x:0,y:0,z:0,elevationRad:0,azimuthRad:0,elevationDeg:30,azimuthDeg:60},p=new l.q,f=function(e){p.scale.setScalar(45e3);const a=e||{},i=new t.Pa4;p.material.uniforms.turbidity.value=a.turbidity||g.turbidity,p.material.uniforms.rayleigh.value=a.rayleigh||g.rayleigh,p.material.uniforms.mieCoefficient.value=a.mieCoefficient||g.mieCoefficient,p.material.uniforms.mieDirectionalG.value=a.mieDirectionalG||g.mieDirectionalG,u.elevationDeg=a.sunElevation||u.elevationDeg;const o=t.M8C.degToRad(90-u.elevationDeg);u.azimuthDeg=a.sunAzimuth||u.azimuthDeg;const n=t.M8C.degToRad(u.azimuthDeg);i.setFromSphericalCoords(1,o,n),u.x=i.x,u.y=i.y,u.z=i.z,u.elevationRad=o,u.azimuthRad=n,p.material.uniforms.sunPosition.value.copy(i)};f(g);const z=new t.Ox3(16777215,2);function v(e){void 0===e&&(e={}),z.intensity=e.intensity||z.intensity,z.color=e.color||z.color,z.castShadow=e.castShadow||z.castShadow,z.shadow.mapSize.width=e.shadowMapSizeW||z.shadow.mapSize.width,z.shadow.mapSize.height=e.shadowMapSizeH||z.shadow.mapSize.height,z.shadow.camera.top=e.shadowBoxHeight/2||z.shadow.camera.top,z.shadow.camera.bottom=-e.shadowBoxHeight/2||z.shadow.camera.bottom,z.shadow.camera.left=-e.shadowBoxWidth/2||z.shadow.camera.left,z.shadow.camera.right=e.shadowBoxWidth/2||z.shadow.camera.right,z.shadow.normalBias=e.shadowNormalBias||z.shadow.normalBias,z.shadow.camera.near=e.near||z.shadow.camera.near,z.shadow.camera.far=e.far||z.shadow.camera.far,z.target.position.set(0,0,0);const a=u.elevationRad,i=u.azimuthRad;z.position.setFromSphericalCoords(20,a,i)}v({castShadow:!0,shadowMapSizeW:2048,shadowMapSizeH:2048,shadowBoxHeight:18,shadowBoxWidth:18,shadowNormalBias:.05,near:3.4,far:50});const y=()=>{z.shadow.camera.updateProjectionMatrix()},b=new t.Rki(z.shadow.camera),S=i.p+"assets/gltf/de31034ffbfd840ee251.glb",C=new t.xsS;C.environment=w;const x=p;f(),C.add(x);const B=z;v(),C.add(B),C.add(B.target),new n.E(o).load(S,(e=>{C.add(e.scene),console.log(e.scene);const a=e.scene.getObjectByName("lawn"),i=e.scene.getObjectByName("lawn_base");i.castShadow=!0,i.receiveShadow=!0;const o=e.scene.getObjectByName("bowl");o.material.roughness=.1,o.material.envmapIntensity=10,o.material.color=new t.Ilk(1118481),o.castShadow=!0,e.scene.children[2].castShadow=!0,a.receiveShadow=!0}),(()=>{}),(e=>{console.log(e.message)}));var j=i(365),D=i(637);C.add(b);const M=new D.XS,R=M.addFolder("Sky values"),E=p.material.uniforms;R.add(E.turbidity,"value",0,100,1).name("turbidity"),R.add(E.rayleigh,"value",0,10,.1).name("rayleigh"),R.add(E.mieCoefficient,"value",.001,.5,.001).name("mieCoefficient"),R.add(E.mieDirectionalG,"value",.001,.5,.001).name("mieDirectionalG");const k={elevation:30,azimuth:180};f({sunElevation:k.elevation,sunAzimuth:k.azimuth}),y(),R.add(k,"elevation",1,360,.5).onChange((e=>{f({sunElevation:e}),v()})),R.add(k,"azimuth",1,360,.5).onChange((e=>{f({sunAzimuth:e}),v()}));const H=M.addFolder("Sun lighting");H.add(b,"visible").name("Show sun helper"),H.add(z,"intensity",.1,20,.1);const W=H.addFolder("Shadow settings");W.add(z.shadow.camera,"top",.5,100,.5).onChange((e=>{v({shadowBoxHeight:e,shadowBoxWidth:e}),b.update(),y()})).name("Shadow area"),W.add(z.shadow.camera,"near",.1,10,.1).onChange((()=>{b.update(),y()})),W.add(z.shadow.camera,"far",10,100,1).onChange((()=>{b.update(),y()}));const F=document.querySelector("#i01"),G={camera:{object:null,type:""},scene:null,size:{width:window.innerWidth,height:window.innerHeight}},P={main:{type:1,config:{fov:60,aspect:G.size.width/G.size.height,near:.1,far:500},ref:null}};G.camera=(e=>{if(1===e.type)return{object:new t.cPb(e.config.fov,e.config.aspect,e.config.near,e.config.far),type:1};throw Error("Incorrect camera type")})(P.main),G.scene=C,G.camera.object.position.y=2;const A=new t.CP7({canvas:F,antialias:!0});A.setPixelRatio(1),A.setSize(G.size.width,G.size.height),A.shadowMap.enabled=!0,A.physicallyCorrectLights=!0;const O=new j.z(G.camera.object,A.domElement);A.toneMapping=t.YGz,A.toneMappingExposure=1,requestAnimationFrame((function e(a){A.render(G.scene,G.camera.object),O.update(),requestAnimationFrame(e)})),window.addEventListener("resize",(e=>{G.size.width=window.innerWidth,G.size.height=window.innerHeight,1===G.camera.type&&(G.camera.object.aspect=G.size.width/G.size.height),G.camera.object.updateProjectionMatrix(),A.setSize(G.size.width,G.size.height),A.render(G.scene,G.camera.object)}))}},e=>{e.O(0,[439,841,929],(()=>(213,e(e.s=213)))),e.O()}]);